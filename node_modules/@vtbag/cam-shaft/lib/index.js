"use strict";(()=>{var d=document.currentScript?.dataset.viewTransitionNames?.split(/\s+/)??["main"],s=[],m=[],p=[];for(let o of d){let[a,e]=o.split("@");if(p.push(a),e){let[t,i]=e.split("&");s.push(parseInt(t,10)),m.push(parseInt(i,10))}else s.push(0),m.push(0)}addEventListener("pageswap",()=>localStorage.setItem("vtbag-camshaft",""+scrollY));addEventListener("pagereveal",async o=>{if(!o.viewTransition)return;let a=0;if(navigation.activation.navigationType==="traverse")a=scrollY;else{let t=new URL(navigation.activation.entry.url).hash??"#top";t&&(document.documentElement.querySelector(t)?.scrollIntoView({behavior:"instant",block:"start"}),a=scrollY)}let e=parseFloat(localStorage.getItem("vtbag-camshaft")??"0");await o.viewTransition?.ready,p?.forEach((t,i)=>{let n=getComputedStyle(document.documentElement,`::view-transition-group(${t})`);if(n.animationName===`-ua-view-transition-group-anim-${t}`){let c=l=>{let u=parseFloat(l);return l.endsWith("ms")?u:u*1e3},r={id:`vtbag-camshaft-${t}-old`,pseudoElement:`::view-transition-old(${t})`,composite:"accumulate",fill:n.animationFillMode,easing:n.animationTimingFunction,duration:s[i]||c(n.animationDuration)};document.documentElement.animate({top:["0px",`${a-e}px`]},r),r={id:`vtbag-camshaft-${t}-new`,pseudoElement:`::view-transition-new(${t})`,composite:"accumulate",fill:n.animationFillMode,easing:n.animationTimingFunction,duration:m[i]||s[i]||c(n.animationDuration)},document.documentElement.animate({top:[`${e-a}px`,"0px"]},r)}})});})();
